<!doctype html>
<html>
	<head>
		<script>
			/*
			Javascript implementation of something similar to rdf turtle representation
			*/
			function test() {
				var expression1 = [ ':a', [ ':b', ':c', ':d', [ ':e', ':f' ] ] ];
				 
				var trips = [];
				// parse( expression1, trips );
				parse2( expression1 );
				console.log( trips );
			}
			
			function parse2( expr ) {
				var head = [];
				var tail = [];
				var ret = [];
				for( var i=0; i < expr.length; i++ ) {
					if( typeOf( expr[i] ) != 'array' ) {
						head.push( expr[i] );
					}
					else {
						tail = parse2( expr[i] );
					}
				}
				for( var j=0; j < tail.length; j++ ) {
					ret.push( head.concat( tail[j] ) );
				}
				return ret;
			}
			
			function parse( expr, triples ) {
				for( var i=0; i < expr.length; i++ ) {
					if( typeOf( expr[i] ) == 'array' ) {
						parse( expr[i], triples );
					}
					else {
						if( triples.length == 0 ) {
							triples.push( [] );
						}
						if( triples[triples.length - 1].length < 3 ) {
							triples[triples.length - 1].push( expr[i] );
						}
						else {
							triples.push( [] );
							triples[triples.length - 1].push( expr[i] );
						}
					}
				}
			}
			
			/**
			* typeOf function published by Douglas Crockford in ECMAScript recommendations
			* http://www.crockford.com/javascript/recommend.html
			*/
			function typeOf(value) {
				var s = typeof value;
				if (s === 'object') {
					if (value) {
						if (typeof value.length === 'number' &&
								!(value.propertyIsEnumerable('length')) &&
								typeof value.splice === 'function') {
							s = 'array';
						}
					} else {
						s = 'null';
					}
				}
				return s;
			}

		</script>
	</head>
	<body onload="test();">
	</body>
</html>